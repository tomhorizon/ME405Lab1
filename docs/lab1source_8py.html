<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.6"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Lab 1 Tom Jonathan Dylan: src/lab1source.py File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">Lab 1 Tom Jonathan Dylan<span id="projectnumber">&#160;405_1</span>
   </div>
   <div id="projectbrief">Motor Driver, Encoder Reader, Classes</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.6 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(document).ready(function(){initNavTree('lab1source_8py.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div class="header">
  <div class="summary">
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle"><div class="title">lab1source.py File Reference</div></div>
</div><!--header-->
<div class="contents">

<p>This file is Lab 1 for ME 405.  
<a href="#details">More...</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="var-members" name="var-members"></a>
Variables</h2></td></tr>
<tr class="memitem:a5d449a03b435bc999b6125d97bcf8f58"><td class="memItemLeft" align="right" valign="top"><a id="a5d449a03b435bc999b6125d97bcf8f58" name="a5d449a03b435bc999b6125d97bcf8f58"></a>
pyb&#160;</td><td class="memItemRight" valign="bottom"><b>lab1source.enablePin</b> = pyb.Pin.board.PA10</td></tr>
<tr class="separator:a5d449a03b435bc999b6125d97bcf8f58"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa8287b3f079753f24d0725e3f071371f"><td class="memItemLeft" align="right" valign="top"><a id="aa8287b3f079753f24d0725e3f071371f" name="aa8287b3f079753f24d0725e3f071371f"></a>
pyb&#160;</td><td class="memItemRight" valign="bottom"><b>lab1source.input1Pin</b> = pyb.Pin.board.PB4</td></tr>
<tr class="separator:aa8287b3f079753f24d0725e3f071371f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9d3bb0f2c2ee63f013ed311c79d8d30f"><td class="memItemLeft" align="right" valign="top"><a id="a9d3bb0f2c2ee63f013ed311c79d8d30f" name="a9d3bb0f2c2ee63f013ed311c79d8d30f"></a>
pyb&#160;</td><td class="memItemRight" valign="bottom"><b>lab1source.input2Pin</b> = pyb.Pin.board.PB5</td></tr>
<tr class="separator:a9d3bb0f2c2ee63f013ed311c79d8d30f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae11ae560af3a021a1b4e70eb2269542e"><td class="memItemLeft" align="right" valign="top"><a id="ae11ae560af3a021a1b4e70eb2269542e" name="ae11ae560af3a021a1b4e70eb2269542e"></a>
pyb&#160;</td><td class="memItemRight" valign="bottom"><b>lab1source.encoder1Pin</b> = pyb.Pin.board.PB6</td></tr>
<tr class="separator:ae11ae560af3a021a1b4e70eb2269542e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2af6c30a16a89a4b8554756659ae1742"><td class="memItemLeft" align="right" valign="top"><a id="a2af6c30a16a89a4b8554756659ae1742" name="a2af6c30a16a89a4b8554756659ae1742"></a>
pyb&#160;</td><td class="memItemRight" valign="bottom"><b>lab1source.encoder2Pin</b> = pyb.Pin.board.PB7</td></tr>
<tr class="separator:a2af6c30a16a89a4b8554756659ae1742"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a258dea5b56174cad94ecc5104d5b5dd2"><td class="memItemLeft" align="right" valign="top"><a id="a258dea5b56174cad94ecc5104d5b5dd2" name="a258dea5b56174cad94ecc5104d5b5dd2"></a>
pyb&#160;</td><td class="memItemRight" valign="bottom"><b>lab1source.motorTimer</b> = pyb.Timer(3, freq=20000)</td></tr>
<tr class="separator:a258dea5b56174cad94ecc5104d5b5dd2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae763f2bd6166a4f39d8f0e83d844a6bf"><td class="memItemLeft" align="right" valign="top"><a id="ae763f2bd6166a4f39d8f0e83d844a6bf" name="ae763f2bd6166a4f39d8f0e83d844a6bf"></a>
pyb&#160;</td><td class="memItemRight" valign="bottom"><b>lab1source.encoderTimer</b> = pyb.Timer(4, prescaler=0, period=0xFFFF)</td></tr>
<tr class="separator:ae763f2bd6166a4f39d8f0e83d844a6bf"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac434219ff50b7f4cf17b19994a1a3d60"><td class="memItemLeft" align="right" valign="top"><a id="ac434219ff50b7f4cf17b19994a1a3d60" name="ac434219ff50b7f4cf17b19994a1a3d60"></a>
MotorDriver&#160;</td><td class="memItemRight" valign="bottom"><b>lab1source.motor1</b> = MotorDriver(enablePin, input1Pin, input2Pin, motorTimer)</td></tr>
<tr class="separator:ac434219ff50b7f4cf17b19994a1a3d60"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8abce6d78067fe9b1a410ec7794c8846"><td class="memItemLeft" align="right" valign="top"><a id="a8abce6d78067fe9b1a410ec7794c8846" name="a8abce6d78067fe9b1a410ec7794c8846"></a>
EncoderReader&#160;</td><td class="memItemRight" valign="bottom"><b>lab1source.encoder1</b> = EncoderReader(encoder1Pin, encoder2Pin, 0, 0)</td></tr>
<tr class="separator:a8abce6d78067fe9b1a410ec7794c8846"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a722d66204c4bbf221f368670b039cca3"><td class="memItemLeft" align="right" valign="top"><a id="a722d66204c4bbf221f368670b039cca3" name="a722d66204c4bbf221f368670b039cca3"></a>
int&#160;</td><td class="memItemRight" valign="bottom"><b>lab1source.count_previous</b> = 0</td></tr>
<tr class="separator:a722d66204c4bbf221f368670b039cca3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a878cae47aa9902c710b810b0175a6faa"><td class="memItemLeft" align="right" valign="top"><a id="a878cae47aa9902c710b810b0175a6faa" name="a878cae47aa9902c710b810b0175a6faa"></a>
int&#160;</td><td class="memItemRight" valign="bottom"><b>lab1source.delta</b> = 0</td></tr>
<tr class="separator:a878cae47aa9902c710b810b0175a6faa"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af0e3a94de25457c6551563cb108422bb"><td class="memItemLeft" align="right" valign="top"><a id="af0e3a94de25457c6551563cb108422bb" name="af0e3a94de25457c6551563cb108422bb"></a>
int&#160;</td><td class="memItemRight" valign="bottom"><b>lab1source.position_old</b> = 0</td></tr>
<tr class="separator:af0e3a94de25457c6551563cb108422bb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5f06ad3bb9e38ce1e73127855eecfd05"><td class="memItemLeft" align="right" valign="top"><a id="a5f06ad3bb9e38ce1e73127855eecfd05" name="a5f06ad3bb9e38ce1e73127855eecfd05"></a>
EncoderReader&#160;</td><td class="memItemRight" valign="bottom"><b>lab1source.count</b> = encoder1.read()</td></tr>
<tr class="separator:a5f06ad3bb9e38ce1e73127855eecfd05"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad3ce41cee97ade04c52a227cf922b38a"><td class="memItemLeft" align="right" valign="top"><a id="ad3ce41cee97ade04c52a227cf922b38a" name="ad3ce41cee97ade04c52a227cf922b38a"></a>
int&#160;</td><td class="memItemRight" valign="bottom"><b>lab1source.position</b> = position_old + delta</td></tr>
<tr class="separator:ad3ce41cee97ade04c52a227cf922b38a"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>This file is Lab 1 for ME 405. </p>
<p>The goal of the exercise was to control a 12V DC motor with an external power supply and STM32 PWM output. The motor has a built-in encoder which gives position feedback. STM32 timers are used to control the encoder input and PWM output.</p>
<p>Once the motor was running well, the motor driver and encoder reader were separated into two independent files as classes. This enables the main script to be relatively brief and the motor driver or encoder reader to be easily used in a later project.</p>
<p>After defining pins and starting timer channels, the encoder is cleared and the motor is set to +50%.</p>
<p>An infinite loop requests the current position from the encoder, calculates a delta from the previous reading, checks and corrects for overflow, updates the new motor position, and delays for a small amount of time.</p>
<dl class="section author"><dt>Author</dt><dd>Tom Taylor </dd>
<dd>
Jonathan Fraser </dd>
<dd>
Dylan Weiglein</dd></dl>
<dl class="section date"><dt>Date</dt><dd>2022-02-01 </dd></dl>
</div></div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="dir_68267d1309a1af8e8297ef4c3efbcdba.html">src</a></li><li class="navelem"><a class="el" href="lab1source_8py.html">lab1source.py</a></li>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.6 </li>
  </ul>
</div>
</body>
</html>
